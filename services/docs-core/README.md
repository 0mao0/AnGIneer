# AnGIneer Docs Core

> å·¥ç¨‹è§„èŒƒçŸ¥è¯†åº“æ ¸å¿ƒå¼•æ“ â€”â€” è®©è§„èŒƒæ–‡æ¡£"å¯è¯»ã€å¯æŸ¥ã€å¯ç®—ã€å¯å¼•ç”¨"

## ğŸ“Œ æ¨¡å—å®šä½

`docs-core` æ˜¯ AnGIneer çš„**çŸ¥è¯†åŸºç¡€è®¾æ–½**ï¼Œè´Ÿè´£å·¥ç¨‹è§„èŒƒæ–‡æ¡£çš„è§£æã€å¢å¼ºã€å­˜å‚¨ä¸æŸ¥è¯¢ã€‚å®ƒæ—¢ä½œä¸º AnGIneer çš„æ ¸å¿ƒæ¨¡å—ï¼Œä¹Ÿå¯ç‹¬ç«‹éƒ¨ç½²ä¸ºé€šç”¨çš„**è§„èŒƒæ–‡æ¡£æ™ºèƒ½å¹³å°**ã€‚

### æ ¸å¿ƒä»·å€¼

| èƒ½åŠ› | æè¿° | å·®å¼‚åŒ– |
|------|------|--------|
| ğŸ“– **å¯è¯»** | é«˜ä¿çœŸè§£æ PDFï¼Œä¿ç•™ç»“æ„ã€å…¬å¼ã€å›¾è¡¨ | åŸºäº MinerU |
| ğŸ” **å¯æŸ¥** | è¯­ä¹‰æ£€ç´¢ + è¡¨æ ¼ç²¾ç¡®æŸ¥è¯¢ | åŒè½¨æŸ¥è¯¢ |
| ğŸ§® **å¯ç®—** | å…¬å¼è§£æä¸è®¡ç®—ã€è¡¨æ ¼æ’å€¼ | å·¥ç¨‹è®¡ç®— |
| ğŸ“ **å¯å¼•ç”¨** | æ¡æ–‡ã€è¡¨æ ¼ã€å›¾ç‰‡çš„ç²¾ç¡®å¼•ç”¨ | å—çº§æº¯æº |

### ä¸å…¶ä»–æ¨¡å—çš„å…³ç³»

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        AnGIneer                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”‚
â”‚  â”‚  sop-core   â”‚â”€â”€â”€â–¶â”‚  docs-core  â”‚â—€â”€â”€â”€â”‚  engtools   â”‚     â”‚
â”‚  â”‚  (æµç¨‹å¼•æ“)  â”‚    â”‚  (çŸ¥è¯†å¼•æ“)  â”‚    â”‚  (è®¡ç®—å·¥å…·)  â”‚     â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
â”‚         â”‚                  â”‚                  â”‚             â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜             â”‚
â”‚                            â–¼                                â”‚
â”‚                   â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                          â”‚
â”‚                   â”‚ angineer-   â”‚                          â”‚
â”‚                   â”‚   core      â”‚                          â”‚
â”‚                   â”‚ (LLMè°ƒåº¦)   â”‚                          â”‚
â”‚                   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                          â”‚
â”‚                                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ—ï¸ æ•´ä½“æ¶æ„

### AnGIneer IDE é£æ ¼ç•Œé¢å¸ƒå±€

```mermaid
flowchart TB
    subgraph MainApp["ğŸ–¥ï¸ AnGIneer ä¸»ç•Œé¢ (IDE é£æ ¼)"]
        subgraph Left["ğŸ“ å·¦ä¾§ - èµ„æºåŒº"]
            TabBar["Tab åˆ‡æ¢æ "]
            subgraph Tabs["èµ„æº Tabs"]
                KB["ğŸ“š çŸ¥è¯†åº“<br/>(docs-ui)"]
                SOP["ğŸ“‹ SOPç»éªŒåº“<br/>(sop-ui)"]
                PRJ["ğŸ“‚ é¡¹ç›®æ–‡ä»¶å¤¹"]
            end
        end

        subgraph Center["ğŸ“„ ä¸­é—´ - å·¥ä½œåŒº"]
            Editor["ç¼–è¾‘å™¨/æŸ¥çœ‹å™¨<br/>(å¤šæ ‡ç­¾é¡µ)"]
            GIS["GIS è§†å›¾<br/>(geo-ui)"]
            Preview["é¢„è§ˆé¢æ¿"]
        end

        subgraph Right["ğŸ’¬ å³ä¾§ - å¯¹è¯åŒº"]
            ModelSel["æ¨¡å‹é€‰æ‹©"]
            Chat["å¯¹è¯ç•Œé¢"]
            Context["@ä¸Šä¸‹æ–‡å¼•ç”¨"]
        end
    end

    TabBar --> KB
    TabBar --> SOP
    TabBar --> PRJ

    KB --> Editor
    SOP --> Editor
    PRJ --> Editor

    Chat --> KB
    Chat --> SOP
    Context --> KB
    Context --> SOP

    style Left fill:#e3f2fd,stroke:#1565c0
    style Center fill:#f3e5f5,stroke:#7b1fa2
    style Right fill:#e8f5e9,stroke:#2e7d32
    style KB fill:#bbdefb,stroke:#1976d2
```

### å‰ç«¯æ¨¡å—é›†æˆæ¶æ„

```mermaid
flowchart TB
    subgraph WebConsole["ğŸ–¥ï¸ web-console (ä¸»åº”ç”¨å®¹å™¨)"]
        subgraph Layout["å¸ƒå±€æ¡†æ¶"]
            LeftPanel["å·¦ä¾§é¢æ¿<br/>SidePanel"]
            CenterPanel["ä¸­é—´é¢æ¿<br/>Workbench"]
            RightPanel["å³ä¾§é¢æ¿<br/>ChatPanel"]
        end

        subgraph LeftModules["å·¦ä¾§æ¨¡å— (å¯æ’æ‹”)"]
            DocsSidebar["docs-ui<br/>çŸ¥è¯†åº“ä¾§è¾¹æ "]
            SOPSidebar["sop-ui<br/>SOPä¾§è¾¹æ "]
            FileSidebar["æ–‡ä»¶æµè§ˆå™¨"]
        end

        subgraph CenterModules["ä¸­é—´æ¨¡å— (å¯æ’æ‹”)"]
            DocsViewer["docs-ui<br/>æ–‡æ¡£æŸ¥çœ‹å™¨"]
            SOPViewer["sop-ui<br/>æµç¨‹æŸ¥çœ‹å™¨"]
            GISViewer["geo-ui<br/>åœ°å›¾æŸ¥çœ‹å™¨"]
            CodeEditor["ä»£ç ç¼–è¾‘å™¨"]
        end

        subgraph RightModules["å³ä¾§æ¨¡å—"]
            ChatUI["å¯¹è¯ç»„ä»¶<br/>(angineer-core)"]
            ContextPicker["ä¸Šä¸‹æ–‡é€‰æ‹©å™¨"]
        end

        subgraph Shared["å…±äº«å±‚"]
            UIKit["ui-kit<br/>åŸºç¡€ç»„ä»¶"]
            EventBus["äº‹ä»¶æ€»çº¿"]
            Store["å…¨å±€çŠ¶æ€<br/>(Pinia)"]
        end
    end

    LeftPanel --> LeftModules
    CenterPanel --> CenterModules
    RightPanel --> RightModules

    LeftModules --> UIKit
    CenterModules --> UIKit
    RightModules --> UIKit

    LeftModules <--> EventBus
    CenterModules <--> EventBus
    RightModules <--> EventBus

    LeftModules <--> Store
    CenterModules <--> Store
    RightModules <--> Store

    style WebConsole fill:#fafafa,stroke:#424242
    style Layout fill:#e0e0e0,stroke:#616161
    style LeftModules fill:#e3f2fd,stroke:#1565c0
    style CenterModules fill:#f3e5f5,stroke:#7b1fa2
    style RightModules fill:#e8f5e9,stroke:#2e7d32
    style Shared fill:#fff8e1,stroke:#f57f17
```

### docs-ui ç»„ä»¶æ¶æ„

```mermaid
flowchart TB
    subgraph DocsUI["ğŸ“š docs-ui æ¨¡å—"]
        subgraph Sidebar["ä¾§è¾¹æ ç»„ä»¶"]
            LibTree["çŸ¥è¯†åº“æ ‘<br/>KnowledgeTree"]
            SearchBox["æœç´¢æ¡†<br/>SearchBox"]
            FilterPanel["ç­›é€‰é¢æ¿<br/>FilterPanel"]
        end

        subgraph Viewer["æŸ¥çœ‹å™¨ç»„ä»¶"]
            DocView["æ–‡æ¡£è§†å›¾<br/>DocumentViewer"]
            TableView["è¡¨æ ¼è§†å›¾<br/>TableView"]
            FormulaView["å…¬å¼è§†å›¾<br/>FormulaViewer"]
            RefView["å¼•ç”¨è§†å›¾<br/>ReferenceViewer"]
        end

        subgraph Common["é€šç”¨ç»„ä»¶"]
            DocCard["æ–‡æ¡£å¡ç‰‡<br/>DocumentCard"]
            TableRenderer["è¡¨æ ¼æ¸²æŸ“å™¨<br/>TableRenderer"]
            FormulaRenderer["å…¬å¼æ¸²æŸ“å™¨<br/>FormulaRenderer"]
            RefAnchor["å¼•ç”¨é”šç‚¹<br/>RefAnchor"]
        end

        subgraph State["çŠ¶æ€ç®¡ç†"]
            DocStore["æ–‡æ¡£çŠ¶æ€<br/>useDocStore"]
            QueryStore["æŸ¥è¯¢çŠ¶æ€<br/>useQueryStore"]
        end

        subgraph API["API å±‚"]
            DocAPI["æ–‡æ¡£ API"]
            QueryAPI["æŸ¥è¯¢ API"]
            RefAPI["å¼•ç”¨ API"]
        end
    end

    Sidebar --> Common
    Viewer --> Common
    Common --> State
    State --> API

    style DocsUI fill:#e8eaf6,stroke:#283593
    style Sidebar fill:#bbdefb,stroke:#1976d2
    style Viewer fill:#c5cae9,stroke:#303f9f
    style Common fill:#d1c4e9,stroke:#512da8
    style State fill:#e1bee7,stroke:#7b1fa2
    style API fill:#f3e5f5,stroke:#4a148c
```

### åç«¯æ¶æ„

```mermaid
flowchart TB
    subgraph Input["ğŸ“¥ è¾“å…¥å±‚"]
        PDF["PDF æ–‡æ¡£"]
        IMG["å›¾ç‰‡/æ‰«æä»¶"]
        MD["Markdown"]
    end

    subgraph MinerU["ğŸ”§ MinerU-RAG (å¤ç”¨)"]
        MC["MinerUClient<br/>æ–‡æ¡£è§£æ"]
        RB["RAGBuilder<br/>å‘é‡å»ºåº“"]
        LC["LLMClient<br/>åŸºç¡€é—®ç­”"]
    end

    subgraph Enhance["âš¡ å¢å¼ºå±‚ (æ ¸å¿ƒå·®å¼‚åŒ–)"]
        TE["TableEnhancer<br/>è¡¨æ ¼å¢å¼ºå™¨"]
        FE["FormulaEngine<br/>å…¬å¼å¼•æ“"]
        RI["RefIndexer<br/>å¼•ç”¨ç´¢å¼•å™¨"]
    end

    subgraph Storage["ğŸ’¾ å­˜å‚¨å±‚"]
        VS["å‘é‡æ•°æ®åº“<br/>è¯­ä¹‰æ£€ç´¢"]
        SS["ç»“æ„åŒ–æ•°æ®åº“<br/>è¡¨æ ¼æ•°æ®"]
        FS["æ–‡ä»¶å­˜å‚¨<br/>åŸå›¾/ç¼“å­˜"]
    end

    subgraph Query["ğŸ” æŸ¥è¯¢æœåŠ¡å±‚"]
        SQ["è¯­ä¹‰æŸ¥è¯¢"]
        TQ["è¡¨æ ¼æŸ¥è¯¢"]
        FQ["å…¬å¼è®¡ç®—"]
        RF["å¼•ç”¨è·å–"]
    end

    subgraph Output["ğŸ“¤ è¾“å‡ºå±‚"]
        API["REST API"]
        SDK["Python SDK"]
        WS["WebSocket"]
    end

    PDF --> MC
    IMG --> MC
    MD --> RB

    MC --> RB
    RB --> LC
    RB --> VS

    MC --> TE
    MC --> FE
    MC --> RI

    TE --> SS
    FE --> SS
    RI --> FS

    VS --> SQ
    SS --> TQ
    SS --> FQ
    FS --> RF

    SQ --> API
    TQ --> API
    FQ --> API
    RF --> API

    SQ --> SDK
    TQ --> SDK
    FQ --> SDK
    RF --> SDK

    style MinerU fill:#e1f5fe,stroke:#01579b
    style Enhance fill:#fff3e0,stroke:#e65100
    style Storage fill:#e8f5e9,stroke:#1b5e20
    style Query fill:#fce4ec,stroke:#880e4f
```

### å‰åç«¯äº¤äº’

```mermaid
sequenceDiagram
    participant U as ç”¨æˆ·
    participant L as å·¦ä¾§é¢æ¿
    participant C as ä¸­é—´å·¥ä½œåŒº
    participant R as å³ä¾§å¯¹è¯
    participant A as docs-core API

    Note over U,A: åœºæ™¯1: æµè§ˆçŸ¥è¯†åº“
    U->>L: ç‚¹å‡»çŸ¥è¯†åº“ Tab
    L->>A: GET /libraries
    A-->>L: çŸ¥è¯†åº“åˆ—è¡¨
    L-->>U: å±•ç¤ºçŸ¥è¯†åº“æ ‘

    Note over U,A: åœºæ™¯2: æŸ¥çœ‹æ–‡æ¡£
    U->>L: ç‚¹å‡»æ–‡æ¡£èŠ‚ç‚¹
    L->>C: æ‰“å¼€æ–‡æ¡£æ ‡ç­¾é¡µ
    C->>A: GET /documents/{id}
    A-->>C: æ–‡æ¡£å†…å®¹
    C-->>U: æ¸²æŸ“æ–‡æ¡£

    Note over U,A: åœºæ™¯3: @å¼•ç”¨çŸ¥è¯†
    U->>R: è¾“å…¥ @
    R->>L: è§¦å‘ä¸Šä¸‹æ–‡é€‰æ‹©
    L-->>R: å¯å¼•ç”¨å†…å®¹åˆ—è¡¨
    U->>R: é€‰æ‹©å¼•ç”¨é¡¹
    R->>A: POST /query/semantic
    A-->>R: ç›¸å…³å†…å®¹
    R-->>U: å±•ç¤ºç­”æ¡ˆ+å¼•ç”¨

    Note over U,A: åœºæ™¯4: è¡¨æ ¼æŸ¥è¯¢
    U->>C: ç‚¹å‡»è¡¨æ ¼
    C->>A: POST /query/table
    A-->>C: è¡¨æ ¼æ•°æ®+ç»“æ„
    C-->>U: å¯äº¤äº’è¡¨æ ¼è§†å›¾
```

---

## ğŸ”— ä¸ MinerU-RAG çš„å…³ç³»

### èƒ½åŠ›å¤ç”¨ä¸å¢å¼º

```mermaid
flowchart LR
    subgraph MinerU["MinerU-RAG (å¼€æº)"]
        M1["PDFè§£æ"]
        M2["Markdownè¾“å‡º"]
        M3["è¯­ä¹‰åˆ‡ç‰‡"]
        M4["å‘é‡å­˜å‚¨"]
        M5["åŸºç¡€é—®ç­”"]
    end

    subgraph DocsCore["docs-core (å¢å¼º)"]
        D1["è¡¨æ ¼ç»“æ„åŒ–"]
        D2["å…¬å¼å¯è®¡ç®—åŒ–"]
        D3["å¼•ç”¨ç´¢å¼•"]
        D4["ç²¾ç¡®æŸ¥è¡¨"]
        D5["å·¥ç¨‹è®¡ç®—"]
    end

    M1 --> M2
    M2 --> M3
    M3 --> M4
    M4 --> M5

    M2 --> D1
    M2 --> D2
    M2 --> D3
    D1 --> D4
    D2 --> D5

    style MinerU fill:#c8e6c9,stroke:#2e7d32
    style DocsCore fill:#ffccbc,stroke:#d84315
```

### å¤ç”¨æ¯”ä¾‹

| åŠŸèƒ½æ¨¡å— | å¤ç”¨ MinerU | è‡ªç ”å¢å¼º | è¯´æ˜ |
|---------|------------|---------|------|
| PDF è§£æ | âœ… 100% | - | ç›´æ¥ä½¿ç”¨ MinerUClient |
| Markdown è¾“å‡º | âœ… 100% | - | é«˜ä¿çœŸè¾“å‡º |
| è¯­ä¹‰åˆ‡ç‰‡ | âœ… 80% | 20% | ä¿ç•™å—è¾¹ç•Œä¿¡æ¯ |
| å‘é‡å­˜å‚¨ | âœ… 100% | - | ä½¿ç”¨ RAGBuilder |
| åŸºç¡€é—®ç­” | âœ… 100% | - | ä½¿ç”¨ LLMClient |
| è¡¨æ ¼å¤„ç† | âŒ 0% | âœ… 100% | **æ ¸å¿ƒå·®å¼‚åŒ–** |
| å…¬å¼è®¡ç®— | âŒ 0% | âœ… 100% | **æ ¸å¿ƒå·®å¼‚åŒ–** |
| å¼•ç”¨æº¯æº | âš ï¸ 30% | âœ… 70% | å¢å¼ºå—çº§ç´¢å¼• |

**ç»“è®º**: MinerU-RAG è§£å†³äº† 80% çš„é€šç”¨é—®é¢˜ï¼Œdocs-core ä¸“æ³¨ 20% çš„å·¥ç¨‹è§„èŒƒå·®å¼‚åŒ–èƒ½åŠ›ã€‚

---

## ğŸ“¦ ç›®å½•ç»“æ„

### åç«¯ (services/docs-core)

```
services/docs-core/
â”œâ”€â”€ src/
â”‚   â””â”€â”€ docs_core/
â”‚       â”œâ”€â”€ parser/              # æ–‡æ¡£è§£æ
â”‚       â”‚   â”œâ”€â”€ mineru_client.py     # MinerU å°è£…
â”‚       â”‚   â””â”€â”€ block_parser.py      # å—è§£æå™¨
â”‚       â”‚
â”‚       â”œâ”€â”€ enhancer/            # å¢å¼ºå™¨ (æ ¸å¿ƒ)
â”‚       â”‚   â”œâ”€â”€ base.py              # å¢å¼ºå™¨åŸºç±»
â”‚       â”‚   â”œâ”€â”€ registry.py          # æ³¨å†Œä¸­å¿ƒ
â”‚       â”‚   â”œâ”€â”€ table/               # è¡¨æ ¼å¢å¼º
â”‚       â”‚   â”‚   â”œâ”€â”€ simple.py            # ç®€å•æŸ¥å€¼è¡¨
â”‚       â”‚   â”‚   â”œâ”€â”€ conditional.py       # æ¡ä»¶æŸ¥è¯¢è¡¨
â”‚       â”‚   â”‚   â”œâ”€â”€ interpolation.py     # æ’å€¼è®¡ç®—è¡¨
â”‚       â”‚   â”‚   â””â”€â”€ chart.py             # å›¾å½¢å¼è¡¨æ ¼
â”‚       â”‚   â”œâ”€â”€ formula/             # å…¬å¼å¢å¼º
â”‚       â”‚   â”‚   â”œâ”€â”€ parser.py            # å…¬å¼è§£æ
â”‚       â”‚   â”‚   â””â”€â”€ calculator.py        # å…¬å¼è®¡ç®—
â”‚       â”‚   â””â”€â”€ reference/           # å¼•ç”¨å¢å¼º
â”‚       â”‚       â””â”€â”€ indexer.py           # å¼•ç”¨ç´¢å¼•
â”‚       â”‚
â”‚       â”œâ”€â”€ storage/             # å­˜å‚¨å±‚
â”‚       â”‚   â”œâ”€â”€ vector_store.py      # å‘é‡å­˜å‚¨
â”‚       â”‚   â”œâ”€â”€ structured_store.py  # ç»“æ„åŒ–å­˜å‚¨
â”‚       â”‚   â””â”€â”€ file_store.py        # æ–‡ä»¶å­˜å‚¨
â”‚       â”‚
â”‚       â”œâ”€â”€ query/               # æŸ¥è¯¢æœåŠ¡
â”‚       â”‚   â”œâ”€â”€ semantic.py          # è¯­ä¹‰æŸ¥è¯¢
â”‚       â”‚   â”œâ”€â”€ table.py             # è¡¨æ ¼æŸ¥è¯¢
â”‚       â”‚   â”œâ”€â”€ formula.py           # å…¬å¼è®¡ç®—
â”‚       â”‚   â””â”€â”€ reference.py         # å¼•ç”¨è·å–
â”‚       â”‚
â”‚       â”œâ”€â”€ api/                 # API å±‚
â”‚       â”‚   â”œâ”€â”€ routes.py            # è·¯ç”±å®šä¹‰
â”‚       â”‚   â””â”€â”€ schemas.py           # æ•°æ®æ¨¡å‹
â”‚       â”‚
â”‚       â””â”€â”€ __init__.py
â”‚
â”œâ”€â”€ tests/
â”‚   â”œâ”€â”€ unit/
â”‚   â”œâ”€â”€ integration/
â”‚   â””â”€â”€ fixtures/
â”‚
â”œâ”€â”€ pyproject.toml
â””â”€â”€ README.md
```

### å‰ç«¯ (packages/docs-ui)

```
packages/docs-ui/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/              # ç»„ä»¶
â”‚   â”‚   â”œâ”€â”€ sidebar/                 # ä¾§è¾¹æ ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ KnowledgeTree.vue        # çŸ¥è¯†åº“æ ‘
â”‚   â”‚   â”‚   â”œâ”€â”€ SearchBox.vue            # æœç´¢æ¡†
â”‚   â”‚   â”‚   â””â”€â”€ FilterPanel.vue          # ç­›é€‰é¢æ¿
â”‚   â”‚   â”œâ”€â”€ viewer/                  # æŸ¥çœ‹å™¨ç»„ä»¶
â”‚   â”‚   â”‚   â”œâ”€â”€ DocumentViewer.vue       # æ–‡æ¡£è§†å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ TableView.vue            # è¡¨æ ¼è§†å›¾
â”‚   â”‚   â”‚   â”œâ”€â”€ FormulaViewer.vue        # å…¬å¼è§†å›¾
â”‚   â”‚   â”‚   â””â”€â”€ ReferenceViewer.vue      # å¼•ç”¨è§†å›¾
â”‚   â”‚   â””â”€â”€ common/                  # é€šç”¨ç»„ä»¶
â”‚   â”‚       â”œâ”€â”€ DocumentCard.vue         # æ–‡æ¡£å¡ç‰‡
â”‚   â”‚       â”œâ”€â”€ TableRenderer.vue        # è¡¨æ ¼æ¸²æŸ“å™¨
â”‚   â”‚       â”œâ”€â”€ FormulaRenderer.vue      # å…¬å¼æ¸²æŸ“å™¨
â”‚   â”‚       â””â”€â”€ RefAnchor.vue            # å¼•ç”¨é”šç‚¹
â”‚   â”‚
â”‚   â”œâ”€â”€ composables/             # ç»„åˆå¼å‡½æ•°
â”‚   â”‚   â”œâ”€â”€ useDocument.ts           # æ–‡æ¡£æ“ä½œ
â”‚   â”‚   â”œâ”€â”€ useQuery.ts              # æŸ¥è¯¢æ“ä½œ
â”‚   â”‚   â””â”€â”€ useRefAnchor.ts          # å¼•ç”¨æ“ä½œ
â”‚   â”‚
â”‚   â”œâ”€â”€ stores/                  # çŠ¶æ€ç®¡ç†
â”‚   â”‚   â”œâ”€â”€ documentStore.ts         # æ–‡æ¡£çŠ¶æ€
â”‚   â”‚   â””â”€â”€ queryStore.ts            # æŸ¥è¯¢çŠ¶æ€
â”‚   â”‚
â”‚   â”œâ”€â”€ api/                     # API å±‚
â”‚   â”‚   â”œâ”€â”€ document.ts              # æ–‡æ¡£ API
â”‚   â”‚   â”œâ”€â”€ query.ts                 # æŸ¥è¯¢ API
â”‚   â”‚   â””â”€â”€ reference.ts             # å¼•ç”¨ API
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                   # ç±»å‹å®šä¹‰
â”‚   â”‚   â”œâ”€â”€ document.ts
â”‚   â”‚   â”œâ”€â”€ table.ts
â”‚   â”‚   â””â”€â”€ reference.ts
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/                  # æ ·å¼
â”‚   â”‚   â””â”€â”€ index.less
â”‚   â”‚
â”‚   â””â”€â”€ index.ts                 # å…¥å£
â”‚
â”œâ”€â”€ package.json
â””â”€â”€ README.md
```

---

## ğŸ—“ï¸ å¼€å‘è®¡åˆ’

### ç‰ˆæœ¬è§„åˆ’æ€»è§ˆ

```mermaid
gantt
    title docs-core å¼€å‘è·¯çº¿å›¾ (å‰åç«¯å¹¶è¡Œ)
    dateFormat  YYYY-MM-DD
    section å‰ç«¯åŸºç¡€
    v0.2.1-0.2.3 å‰ç«¯éª¨æ¶        :f1, 2026-03-01, 7d
    v0.2.4-0.2.8 ä¾§è¾¹æ ç»„ä»¶      :f2, after f1, 14d
    v0.2.9-0.2.13 æ–‡æ¡£æŸ¥çœ‹å™¨     :f3, after f2, 14d
    v0.2.14-0.2.18 è¡¨æ ¼äº¤äº’      :f4, after f3, 14d
    v0.2.19-0.2.22 å¼•ç”¨é›†æˆ      :f5, after f4, 10d
    section åç«¯åŸºç¡€
    v0.2.1-0.2.3 åç«¯éª¨æ¶        :b1, 2026-03-01, 7d
    v0.2.4-0.2.8 MinerUé›†æˆ      :b2, after b1, 14d
    v0.2.9-0.2.13 è¡¨æ ¼å¢å¼ºå™¨     :b3, after b2, 14d
    v0.2.14-0.2.18 å…¬å¼å¼•æ“      :b4, after b3, 14d
    v0.2.19-0.2.22 å¼•ç”¨ç´¢å¼•      :b5, after b4, 10d
    section é›†æˆå®Œå–„
    v0.2.23-0.2.30 æŸ¥è¯¢æœåŠ¡      :i1, after f5 b5, 21d
    v0.2.31-0.2.40 å¯¹è¯é›†æˆ      :i2, after i1, 28d
    v0.2.41-0.2.50 ä¼˜åŒ–å®Œå–„      :i3, after i2, 28d
```

### è¯¦ç»†é‡Œç¨‹ç¢‘

#### Phase 1: åŸºç¡€éª¨æ¶ (v0.2.1 - v0.2.3) [å‰åç«¯å¹¶è¡Œ]

| ç‰ˆæœ¬ | å‰ç«¯ç›®æ ‡ | åç«¯ç›®æ ‡ |
|------|---------|---------|
| v0.2.1 | docs-ui é¡¹ç›®åˆå§‹åŒ–ã€ç›®å½•ç»“æ„ | docs-core é¡¹ç›®åˆå§‹åŒ–ã€pyproject.toml |
| v0.2.2 | åŸºç¡€ç»„ä»¶æ¡†æ¶ã€è·¯ç”±é…ç½® | æ ¸å¿ƒæ•°æ®æ¨¡å‹å®šä¹‰ |
| v0.2.3 | ä¸ web-console é›†æˆæµ‹è¯• | API éª¨æ¶ã€Mock æ•°æ® |

#### Phase 2: æ ¸å¿ƒåŠŸèƒ½ (v0.2.4 - v0.2.8) [å‰åç«¯å¹¶è¡Œ]

| ç‰ˆæœ¬ | å‰ç«¯ç›®æ ‡ | åç«¯ç›®æ ‡ |
|------|---------|---------|
| v0.2.4 | KnowledgeTree ç»„ä»¶ | MinerUClient å°è£… |
| v0.2.5 | SearchBox ç»„ä»¶ | PDF è§£ææµ‹è¯• |
| v0.2.6 | FilterPanel ç»„ä»¶ | Markdown å—è§£æ |
| v0.2.7 | ä¾§è¾¹æ é›†æˆè°ƒè¯• | å¢å¼ºå™¨æ¡†æ¶ |
| v0.2.8 | ä¾§è¾¹æ æ ·å¼ä¼˜åŒ– | è¡¨æ ¼åˆ†ç±»å™¨ |

#### Phase 3: æ–‡æ¡£/è¡¨æ ¼ (v0.2.9 - v0.2.18) [å‰åç«¯å¹¶è¡Œ]

| ç‰ˆæœ¬ | å‰ç«¯ç›®æ ‡ | åç«¯ç›®æ ‡ |
|------|---------|---------|
| v0.2.9 | DocumentViewer ç»„ä»¶ | ç®€å•è¡¨å¤„ç† |
| v0.2.10 | Markdown æ¸²æŸ“ | æ¡ä»¶è¡¨å¤„ç† |
| v0.2.11 | å…¬å¼æ¸²æŸ“ (KaTeX) | åŒºé—´åŒ¹é…ç®—æ³• |
| v0.2.12 | å›¾ç‰‡é¢„è§ˆ | æ’å€¼è¡¨å¤„ç† |
| v0.2.13 | æ–‡æ¡£æ ‡ç­¾é¡µç®¡ç† | æ’å€¼ç®—æ³•å®ç° |
| v0.2.14 | TableRenderer ç»„ä»¶ | å›¾å½¢å¼è¡¨æ ¼ |
| v0.2.15 | è¡¨æ ¼å‚æ•°è¾“å…¥ | è¡¨æ ¼å­˜å‚¨ |
| v0.2.16 | è¡¨æ ¼ç»“æœå±•ç¤º | è¡¨æ ¼æŸ¥è¯¢ API |
| v0.2.17 | è¡¨æ ¼æ’å€¼äº¤äº’ | å…¬å¼è§£æå™¨ |
| v0.2.18 | è¡¨æ ¼å¯¼å‡ºåŠŸèƒ½ | å…¬å¼è®¡ç®—å¼•æ“ |

#### Phase 4: å¼•ç”¨ç³»ç»Ÿ (v0.2.19 - v0.2.22) [å‰åç«¯å¹¶è¡Œ]

| ç‰ˆæœ¬ | å‰ç«¯ç›®æ ‡ | åç«¯ç›®æ ‡ |
|------|---------|---------|
| v0.2.19 | RefAnchor ç»„ä»¶ | å—æ ‡è¯†ç”Ÿæˆ |
| v0.2.20 | å¼•ç”¨è·³è½¬åŠŸèƒ½ | ä½ç½®ç´¢å¼• |
| v0.2.21 | å¼•ç”¨å¤åˆ¶åŠŸèƒ½ | å¼•ç”¨è§£æ |
| v0.2.22 | å¼•ç”¨é¢„è§ˆæµ®å±‚ | å¼•ç”¨å­˜å‚¨ |

#### Phase 5: æŸ¥è¯¢æœåŠ¡ (v0.2.23 - v0.2.30) [é›†æˆå¼€å‘]

| ç‰ˆæœ¬ | ç›®æ ‡ | äº¤ä»˜ç‰© |
|------|------|--------|
| v0.2.23 | è¯­ä¹‰æŸ¥è¯¢é›†æˆ | å‰ç«¯è°ƒç”¨ RAGBuilder |
| v0.2.24 | æŸ¥è¯¢ç»“æœå±•ç¤º | ç»“æœåˆ—è¡¨ç»„ä»¶ |
| v0.2.25 | æ··åˆæŸ¥è¯¢ | è¯­ä¹‰+è¡¨æ ¼æ··åˆ |
| v0.2.26 | æŸ¥è¯¢å†å² | å†å²è®°å½•åŠŸèƒ½ |
| v0.2.27 | æŸ¥è¯¢ç¼“å­˜ | å‰ç«¯ç¼“å­˜ä¼˜åŒ– |
| v0.2.28 | æ‰¹é‡æŸ¥è¯¢ | æ‰¹é‡æ¥å£å®ç° |
| v0.2.29 | æŸ¥è¯¢å¯¼å‡º | å¯¼å‡ºæŠ¥å‘ŠåŠŸèƒ½ |
| v0.2.30 | æŸ¥è¯¢æµ‹è¯• | E2E æµ‹è¯• |

#### Phase 6: å¯¹è¯é›†æˆ (v0.2.31 - v0.2.40) [æ ¸å¿ƒé›†æˆ]

| ç‰ˆæœ¬ | ç›®æ ‡ | äº¤ä»˜ç‰© |
|------|------|--------|
| v0.2.31 | @æåŠåŠŸèƒ½ | ä¸Šä¸‹æ–‡é€‰æ‹©å™¨ |
| v0.2.32 | çŸ¥è¯†åº“é€‰æ‹© | å¤šçŸ¥è¯†åº“åˆ‡æ¢ |
| v0.2.33 | å¼•ç”¨æ³¨å…¥ | å¯¹è¯æºå¸¦å¼•ç”¨ä¸Šä¸‹æ–‡ |
| v0.2.34 | ç­”æ¡ˆæº¯æº | å›ç­”æ¥æºå±•ç¤º |
| v0.2.35 | è¡¨æ ¼@æŸ¥è¯¢ | @è¡¨æ ¼ç›´æ¥æŸ¥è¯¢ |
| v0.2.36 | å…¬å¼@è®¡ç®— | @å…¬å¼ç›´æ¥è®¡ç®— |
| v0.2.37 | å¼•ç”¨@è·³è½¬ | @å¼•ç”¨ç›´æ¥è·³è½¬ |
| v0.2.38 | å¯¹è¯å†å² | å¯¹è¯è®°å½•ç®¡ç† |
| v0.2.39 | å¯¹è¯å¯¼å‡º | å¯¹è¯å¯¼å‡ºæŠ¥å‘Š |
| v0.2.40 | å¯¹è¯æµ‹è¯• | é›†æˆæµ‹è¯• |

#### Phase 7: ä¼˜åŒ–å®Œå–„ (v0.2.41 - v0.2.50)

| ç‰ˆæœ¬ | ç›®æ ‡ | äº¤ä»˜ç‰© |
|------|------|--------|
| v0.2.41 | æ€§èƒ½ä¼˜åŒ– | è™šæ‹Ÿæ»šåŠ¨ã€æ‡’åŠ è½½ |
| v0.2.42 | é”™è¯¯å¤„ç† | å‹å¥½é”™è¯¯æç¤º |
| v0.2.43 | å›½é™…åŒ– | i18n æ”¯æŒ |
| v0.2.44 | ä¸»é¢˜å®šåˆ¶ | ä¸»é¢˜åˆ‡æ¢ |
| v0.2.45 | å¿«æ·é”® | é”®ç›˜æ“ä½œæ”¯æŒ |
| v0.2.46 | æ— éšœç¢ | a11y ä¼˜åŒ– |
| v0.2.47 | ç§»åŠ¨é€‚é… | å“åº”å¼å¸ƒå±€ |
| v0.2.48 | æ–‡æ¡£å®Œå–„ | API æ–‡æ¡£ã€ä½¿ç”¨æŒ‡å— |
| v0.2.49 | æµ‹è¯•è¦†ç›– | æµ‹è¯•è¦†ç›–ç‡ >80% |
| v0.2.50 | å‘å¸ƒå‡†å¤‡ | å‘å¸ƒæ£€æŸ¥ã€ç‰ˆæœ¬å·æ›´æ–° |

---

## ğŸ”Œ å‰ç«¯é›†æˆæŒ‡å—

### ä¸ web-console çš„é›†æˆ

#### 1. æ³¨å†Œä¾§è¾¹æ æ¨¡å—

```typescript
import { createDocsSidebar } from '@angineer/docs-ui'
import { useSidebarStore } from '@angineer/web-console'

const sidebarStore = useSidebarStore()

sidebarStore.registerModule({
  id: 'knowledge-base',
  label: 'çŸ¥è¯†åº“',
  icon: 'BookOutlined',
  component: createDocsSidebar(),
  order: 1
})
```

#### 2. æ³¨å†Œå·¥ä½œåŒºè§†å›¾

```typescript
import { DocumentViewer, TableView } from '@angineer/docs-ui'
import { useWorkbenchStore } from '@angineer/web-console'

const workbenchStore = useWorkbenchStore()

workbenchStore.registerViewer({
  type: 'document',
  component: DocumentViewer,
  extensions: ['md', 'pdf']
})

workbenchStore.registerViewer({
  type: 'table',
  component: TableView,
  extensions: ['table']
})
```

#### 3. æ³¨å†Œä¸Šä¸‹æ–‡æä¾›è€…

```typescript
import { DocsContextProvider } from '@angineer/docs-ui'
import { useContextStore } from '@angineer/web-console'

const contextStore = useContextStore()

contextStore.registerProvider({
  id: 'docs',
  label: 'çŸ¥è¯†åº“',
  provider: DocsContextProvider,
  trigger: '@'
})
```

### äº‹ä»¶é€šä¿¡

```typescript
import { useEventBus } from '@angineer/web-console'

const eventBus = useEventBus()

eventBus.on('docs:open', (docId: string) => {
  workbenchStore.openTab({ type: 'document', id: docId })
})

eventBus.on('docs:ref:selected', (ref: Reference) => {
  chatStore.appendContext(ref)
})
```

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### åç«¯å®‰è£…

```bash
cd services/docs-core
pip install -e ".[dev]"
pip install mineru-rag[rag]
```

### å‰ç«¯å®‰è£…

```bash
cd packages/docs-ui
pnpm install
pnpm run dev
```

### åŸºç¡€ä½¿ç”¨

```python
from docs_core import DocsEngine

engine = DocsEngine()
result = engine.process_document("è§„èŒƒæ–‡æ¡£.pdf", library_id="harbor_spec")
answer = engine.query("èˆªé“é€šèˆªæ°´æ·±å¦‚ä½•è®¡ç®—ï¼Ÿ")
value = engine.query_table(table_id="vessel-sinkage-table", params={"dwt": 10, "speed": 8})
ref = engine.get_reference("block-123")
```

---

## ğŸ“„ è®¸å¯è¯

MIT License - è¯¦è§ [LICENSE](../../LICENSE)
